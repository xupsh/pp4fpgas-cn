# 第九章 视频系统

## 9.1 背景

FPGA技术在视频图像处理领域应用非常广泛，其主要原因是FPGA工作频率可以完美匹配视频流数据速率。
例如，常见的全高清(即1080P60)视频的高清视频格式组成如下：每一行有1920个像素点，每一帧有1080个行，每一秒有60帧，即每秒钟有124416000个像素点。
$$
1920 pixel/line *  1080 lines/frame *  60 frames/second = 124416000 pixels/second
$$
在数字视频流传输时，全高清下每秒大概需要处理125M个有效像素点，加上一些空白像素点处理，FPGA电路的工作频率在148.5MHz可以流水地处理这些像素点。更高数据速率也可以通过在每个时钟周期处理多路并发来实现，详情将在数字视频传输9.1.2节中介绍。 如图9.1所示，视频主要是按扫描线顺序从左上角像素到右下角像素进行处理， 这种可预测的顺序运行，允许构建高度专业化的内存架构在FPGA电路中可以高效处理视频而不会有过多的存储空间。 这些体系结构的详细信息将在第9.2.1节中介绍。



视频处理也是HLS的一个很好的目标应用。 首先，视频处理通常是容忍处理延迟。 许多应用程序可以容忍几帧的处理延迟，尽管一些应用可能会将整体延迟限制到少于一帧。 因此，高度流水线实现可以通过HLS中的吞吐量和时钟约束生成很少关心处理延迟。 其次，视频算法往往非常不规范并基于算法专家的个人品味或直觉开发这导致他们被开发成高级语言，他们可以快速开发和模拟感兴趣的序列。 全高清视频处理算法运行于60时并不罕见



在FPGA系统中每秒帧数，在可运行的可综合C / C ++代码中每秒一帧在开发笔记本电脑上，但在RTL模拟器中每小时（或更慢）只有一帧。 最后，视频处理算法通常很容易用嵌套循环编程风格表达适合HLS。 这意味着许多视频算法可以被合成为一个FPGA电路直接来自算法开发人员为原型设计而编写的C / C ++代码无论如何

### 9.1.1 视频像素表示

### 9.1.2 数字视频格式

### 9.1.3 视频处理系统架构

## 9.2 实现

### 9.2.1 行缓存和帧缓存

### 9.2.2 因果滤波

### 9.2.3 边界条件

## 9.3 总结
